{% extends "base.html" %}
{% block content %}

<div class="album py-5 bg-body-tertiary"></div>
<div class="grid-container">

    {% for movie in movies %}
    <form action="/get_recommendations" method="post" onsubmit="return validateForm()">
        <div class="col">
            <div class="card shadow-sm">
                <div class="grid-item">
                    {% if movie['image_url'] %}
                    <img class="bd-placeholder-img card-img-top" preserveAspectRatio="xMidYMid slice" focusable="false"
                        src="{{ movie['image_url'] }}">
                    {% else %}
                    <svg class="bd-placeholder-img card-img-top" xmlns="http://www.w3.org/2000/svg" width="262px" height="387px" role="img"
                        aria-label="Placeholder: Thumbnail" focusable="false">
                        <title>Placeholder</title>
                        <rect width="100%" height="100%" fill="#55595c" />
                        <text x="40%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text>
                    </svg>
                    {% endif %}
                </div>
                <div class="card-body">
                    <p class="card-text">{{ movie['title'] }}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge bg-primary-subtle text-primary-emphasis rounded-pill">{{ movie['genres']
                            }}</span>
                        <input type="checkbox" name="selected_movies" value="{{ movie['movieId'] }}">
                        </div>
                        </div>
                        </div>
                        </div>

    </form>
    {% endfor %}
</div>

<div class="col-lg-6 col-xxl-4 my-5 mx-auto">
    <div class="d-grid gap-2">
        <button class="btn btn-primary btn-margins" type="button">Primary action</button>
    </div>
</div>

<script>
    function validateForm() {
        var checkboxes = document.querySelectorAll('input[name="selected_movies"]:checked');
        if (checkboxes.length < 10) {
            alert("Please select at least 10 movies.");
            return false;
        }
        return true;
    }
</script>
{% endblock %}
